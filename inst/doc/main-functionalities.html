<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Main functionalities</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Main functionalities</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(joyn)</span></code></pre></div>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>üìå In <code>joyn</code>, there are two major sets of tools to join
data tables:</p>
<ol style="list-style-type: decimal">
<li><p>The primary function <code>joyn()</code></p></li>
<li><p>Dplyr-like join functions: <code>left_join()</code>,
<code>right_join()</code>, <code>full_join()</code>,
<code>inner_join()</code></p></li>
</ol>
<p>This vignette will explore the main function <code>joyn()</code>. You
can read about dplyr-joins in the ‚Äú<strong>dplyr-joins‚Äù</strong> article
instead.</p>
</div>
<div id="general-use" class="section level2">
<h2>General use</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(joyn)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id =</span> <span class="fu">c</span>(1L, 1L, 2L, 3L, <span class="cn">NA_integer_</span>),</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>                 <span class="at">t  =</span> <span class="fu">c</span>(1L, 2L, 1L, 2L, <span class="cn">NA_integer_</span>),</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>                 <span class="at">x  =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>                 <span class="at">y  =</span> <span class="fu">c</span>(11L, 15L, <span class="dv">16</span>))</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>),</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>                 <span class="at">t  =</span> <span class="fu">c</span>(1L, 2L, 1L, 2L, <span class="cn">NA_integer_</span>),</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>                 <span class="at">x  =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">12</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">15</span>))</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>y2 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">3</span>),</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>                 <span class="at">yd =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">3</span>),</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>                 <span class="at">y  =</span> <span class="fu">c</span>(11L, 15L, 20L, 13L, 10L),</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>                 <span class="at">x  =</span> <span class="fu">c</span>(<span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>))</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id  =</span> <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>,<span class="st">&quot;b&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;d&quot;</span>),</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>                 <span class="at">v   =</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>                 <span class="at">foo =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">3</span>))</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>y3 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>,<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;a&quot;</span>),</span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>                 <span class="at">y  =</span> <span class="fu">c</span>(11L, 15L, 18L, 20L))</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>x4 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>                 <span class="at">id2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>                 <span class="at">t   =</span> <span class="fu">c</span>(1L, 2L, 1L, 2L, <span class="cn">NA_integer_</span>),</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>                 <span class="at">x   =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">12</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">15</span>))</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>y4 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id  =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">3</span>),</span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a>                 <span class="at">id2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a>                 <span class="at">y   =</span> <span class="fu">c</span>(11L, 15L, 20L, 13L, 10L),</span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a>                 <span class="at">x   =</span> <span class="fu">c</span>(<span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>))</span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a>x5 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id      =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>),</span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a>                 <span class="at">t       =</span> <span class="fu">c</span>(1L, 2L, 1L, 2L, <span class="cn">NA</span>),</span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a>                 <span class="at">country =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">12</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">15</span>))</span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a>  </span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a>y5 <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">id      =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">3</span>),</span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a>                 <span class="at">gdp     =</span> <span class="fu">c</span>(11L, 15L, 20L, 13L, 10L),</span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a>                 <span class="at">country =</span> <span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>)</span></code></pre></div>
<div id="the-basics" class="section level3">
<h3>The basics</h3>
<p>Let‚Äôs suppose that you want to join the two tables <code>x1</code>
and <code>y1</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Calling joyn() to join x1 and y1</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x1,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>     <span class="at">y =</span> y1, </span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:1&quot;</span> ) <span class="co">#Note RT: remove this argument once fixing the default value</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    14    NA      x</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA      x</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; 6:     4    NA    NA    16      y</span></span></code></pre></div>
<p>The output table is the result of a <em>full join</em> -which is what
<code>joyn</code> always executes by the default. This means that the
returning table will retains both matching and non matching rows from
both <code>x1</code> and <code>y1</code>. Notice that the resulting
table also contains an additional variable called <code>.joyn</code>,
which is the <em>reporting variable</em>. (Read below ‚¨áÔ∏è)</p>
<div id="reporting-variable" class="section level4">
<h4>Reporting variable</h4>
<p>A particular feature of <code>joyn</code> is that it includes the
<strong><code>reportvar</code></strong> in the returning table, which
informs you about the status of the join. You can modify both the name
and the format of the reporting variable as follows:</p>
<ul>
<li><p>Name: by default <code>reportvar = &quot;.joyn&quot;</code>, but you can
modify it with <code>reportvar = &quot;myname&quot;</code> specifying the name you
want to assign</p></li>
<li><p>Format: by default <code>reporttype = &quot;character&quot;</code> , but
you can also set it to numeric using
<code>reporttype = &quot;numeric&quot;</code></p></li>
</ul>
<p>You can see the difference between the two types in the table below<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>:</p>
<table>
<thead>
<tr class="header">
<th align="left">numeric</th>
<th align="center">character</th>
<th align="left">meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="center">x</td>
<td align="left">Obs only available in x table</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="center">y</td>
<td align="left">Obs only available in y table</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="center">x &amp; y</td>
<td align="left">Matching obs available in both tables</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="center">NA updated</td>
<td align="left">NAs in x updated with actual values in variables with
same names in y</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="center">value updated</td>
<td align="left">Actual values and NAs in x updated with actual values
in variables with same names in y</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="center">not updated</td>
<td align="left">Actual values and NAs in x are NOT updated with actual
values in y</td>
</tr>
</tbody>
</table>
</div>
<div id="key-variables" class="section level4">
<h4>Key variables</h4>
<p>When performing a join, you might want to specify which variable(s)
<code>joyn</code> should join by.</p>
<p>While by default <code>joyn</code> will consider the variable(s) in
common between <code>x</code> and <code>y</code> as key(s) for the join,
our suggestion is to make the keys explicit - i.e., specifying it/them
in the <code>by</code> argument</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># Join with one variable in common</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x1,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>     <span class="at">y =</span> y1, </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>, </span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:1&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    14    NA      x</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA      x</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; 6:     4    NA    NA    16      y</span></span></code></pre></div>
<p>If you don‚Äôt want to join by all variables in common between
<code>x</code> and <code>y</code>, you can alternately use equivalency
as an element of <code>by</code> vector. This specification allows you
to join on different variables between <code>x</code> and
<code>y.</code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x4, </span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>     <span class="at">y =</span> y4, </span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>     <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;id1 = id&quot;</span>, <span class="st">&quot;id2&quot;</span>), </span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt;      id1   id2     t     x     y  .joyn</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt; 1:     1     1     1    16    11  x &amp; y</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt; 2:     1     1     2    12    11  x &amp; y</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt; 3:     2     2     1    NA    NA      x</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; 4:     3     3     2    NA    NA      x</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; 5:     3     4    NA    15    10  x &amp; y</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; 6:     2     1    NA    NA    15      y</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; 7:     5     2    NA    NA    20      y</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt; 8:     6     3    NA    NA    13      y</span></span></code></pre></div>
<p>Also, notice that <code>joyn</code> will <code>sort</code> the
resulting table by key variables in <code>by</code>. This is because
<code>sort = TRUE</code> by default.</p>
</div>
</div>
<div id="match-type" class="section level3">
<h3>Match type</h3>
<p>üí°Match type refers to the relationship that exists between the
observations of the joining tables. The possibility to perform joins
based on the match type is one of the value added of using
<code>joyn</code>.</p>
<p>Following Stata‚Äôs convention, we can have four different match
types:</p>
<ol style="list-style-type: decimal">
<li><p><strong>1:1</strong> (one to one): the
<strong><em>default</em></strong><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, the variables specified in <code>by</code>
variables uniquely identify single observations in both table ‚Äì&gt; each
observation in left table has a unique match in the right table and
viceversa</p></li>
<li><p><strong>1:m</strong> (one to many): only left table is uniquely
identified by <code>by</code>variables ‚Äì&gt; each observation in
<code>by</code> var of the left table can have multiple matches in
<code>by</code> var of the right table</p></li>
<li><p><strong>m:1</strong> (many to one): only right table is uniquely
identified by <code>by</code>var -&gt; each observation in left table
can have only one match in the right table but observations in the right
table might have multiple matches in the left table</p></li>
<li><p><strong>m:m</strong> (many to many): variables in <code>by</code>
does not uniquely identify the observations in either table ‚Äì&gt; both
tables can have multiple matches for each observation</p></li>
</ol>
<p>We recommend you always specify the match type when joining tables to
ensure the output is correct.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># Many to one match type</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x1,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>     <span class="at">y =</span> y1,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:1&quot;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    14    NA      x</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA      x</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt; 6:     4    NA    NA    16      y</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co"># Many to many match type</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x3,</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>     <span class="at">y =</span> y3,</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>)</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">#&gt;        id     v   foo     y  .joyn</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co">#&gt;    &lt;char&gt; &lt;int&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="co">#&gt; 1:      c     8     4    11  x &amp; y</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="co">#&gt; 2:      c     8     4    18  x &amp; y</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="co">#&gt; 3:      b     9     2    15  x &amp; y</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="co">#&gt; 4:      d    10     7    NA      x</span></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="co">#&gt; 5:      d    11     3    NA      x</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="co">#&gt; 6:      a    NA    NA    20      y</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="co"># One to one match type - the default</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x2,</span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>     <span class="at">y =</span> y2,</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;1:1&quot;</span>)</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="co">#&gt;       id     t     x    yd     y  .joyn</span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    16     1    11  x &amp; y</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="co">#&gt; 2:     4     2    12    NA    NA      x</span></span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    NA     2    15  x &amp; y</span></span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    NA     3    10  x &amp; y</span></span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA    NA      x</span></span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a><span class="co">#&gt; 6:     5    NA    NA     5    20      y</span></span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a><span class="co">#&gt; 7:     6    NA    NA     6    13      y</span></span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a><span class="co"># Same join as:</span></span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a></span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x2,</span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a>     <span class="at">y =</span> y2,</span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a><span class="co">#&gt;       id     t     x    yd     y  .joyn</span></span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span></span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    16     1    11  x &amp; y</span></span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a><span class="co">#&gt; 2:     4     2    12    NA    NA      x</span></span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    NA     2    15  x &amp; y</span></span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    NA     3    10  x &amp; y</span></span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA    NA      x</span></span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a><span class="co">#&gt; 6:     5    NA    NA     5    20      y</span></span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a><span class="co">#&gt; 7:     6    NA    NA     6    13      y</span></span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a></span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a><span class="co"># One to many match type </span></span>
<span id="cb6-62"><a href="#cb6-62" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x5,</span>
<span id="cb6-63"><a href="#cb6-63" tabindex="-1"></a>     <span class="at">y =</span> y5,</span>
<span id="cb6-64"><a href="#cb6-64" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb6-65"><a href="#cb6-65" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;1:m&quot;</span>)</span>
<span id="cb6-66"><a href="#cb6-66" tabindex="-1"></a><span class="co">#&gt;       id     t country   gdp  .joyn</span></span>
<span id="cb6-67"><a href="#cb6-67" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt;   &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span></span>
<span id="cb6-68"><a href="#cb6-68" tabindex="-1"></a><span class="co">#&gt; 1:     1     1      16    11  x &amp; y</span></span>
<span id="cb6-69"><a href="#cb6-69" tabindex="-1"></a><span class="co">#&gt; 2:     4     2      12    NA      x</span></span>
<span id="cb6-70"><a href="#cb6-70" tabindex="-1"></a><span class="co">#&gt; 3:     2     1       3    15  x &amp; y</span></span>
<span id="cb6-71"><a href="#cb6-71" tabindex="-1"></a><span class="co">#&gt; 4:     2     1       3    20  x &amp; y</span></span>
<span id="cb6-72"><a href="#cb6-72" tabindex="-1"></a><span class="co">#&gt; 5:     3     2      NA    10  x &amp; y</span></span>
<span id="cb6-73"><a href="#cb6-73" tabindex="-1"></a><span class="co">#&gt; 6:    NA    NA      15    NA      x</span></span>
<span id="cb6-74"><a href="#cb6-74" tabindex="-1"></a><span class="co">#&gt; 7:     6    NA      NA    13      y</span></span></code></pre></div>
<p>However, if are unsure/wrong about the relationships between the
observations in your tables, <code>joyn</code> will let you know that
something is not right. Suppose you think your data is uniquely
identified by variable <code>id</code>, while it is not. By setting
<code>match_type = &quot;1:1&quot;</code> you will get and error, informing you
that the match type is not as expected.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># Merging correctly but getting error because something is not right in the data</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">joyn</span>(x3, y3, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>, <span class="at">match_type =</span> <span class="st">&quot;1:1&quot;</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; ‚úñ Error: table x is not uniquely identified by id</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt; ‚úñ Error: table y is not uniquely identified by id</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; Error in `check_match_type()`:</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; ! match type inconsistency</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; ‚Ñπ set verbose to TRUE to see where the issue is</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co"># Merging wrongly but getting NO errors because you did not use match_type</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="fu">joyn</span>(x3, y3, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; ‚úñ Error: table x is not uniquely identified by id</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">#&gt; ‚úñ Error: table y is not uniquely identified by id</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co">#&gt; Error in `check_match_type()`:</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="co">#&gt; ! match type inconsistency</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co">#&gt; ‚Ñπ set verbose to TRUE to see where the issue is</span></span></code></pre></div>
<p>If instead you don‚Äôt care about match types or you don‚Äôt think it is
necessary to use them for your particular needs, you might be fine
without <code>joyn</code>.</p>
</div>
<div id="type-of-join" class="section level3">
<h3>Type of join</h3>
<p>Join type determines which observations will be kept after the join.
<code>joyn()</code> allows you to choose which type of join to execute
via the <code>keep</code> argument.</p>
<p>This argument is called <code>keep</code> rather than
<code>join_type</code> to avoid confusion with the argument
<code>match_type</code>, and in order to reflect that what you are
specifying in the end is which observations you want to keep. This
argument plays the role of allowing <code>joyn()</code> to mimic the
behavior of <code>dplyr</code>‚Äôs functions <code>left_join</code>,
<code>right_join</code>, <code>inner_join</code>, and
<code>full_join</code>, the default.</p>
<p><code>keep</code> can be of four types:</p>
<ul>
<li><p><strong><code>keep = &quot;full&quot;</code></strong>: the default, which
keeps <em>all</em> the observations in x and y, regardless of whether
they match or not.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># Full join </span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x          =</span> x1, </span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>     <span class="at">y          =</span> y1, </span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>)</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    14    NA      x</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA      x</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="co">#&gt; 6:     4    NA    NA    16      y</span></span></code></pre></div></li>
<li><p><strong><code>keep = &quot;left&quot;</code></strong> or
<strong><code>keep = &quot;master&quot;</code></strong> : keeps all observations
in <code>x</code>, both matching and non, and only those observations in
<code>y</code> that match in <code>x</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># keep obs in x</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x          =</span> x1, </span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>     <span class="at">y          =</span> y1, </span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>     <span class="at">keep       =</span> <span class="st">&quot;left&quot;</span>, </span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt; 4:     3     2    14    NA      x</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt; 5:    NA    NA    15    NA      x</span></span></code></pre></div></li>
<li><p><strong><code>keep = &quot;right&quot;</code></strong> or
<strong><code>keep = &quot;using&quot;</code></strong> keeps all observations in
<code>y</code>, both matching and non, and only those observations in
<code>x</code> that match in <code>y</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># keep obs in y</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x          =</span> x1, </span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>     <span class="at">y          =</span> y1,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>     <span class="at">keep       =</span> <span class="st">&quot;right&quot;</span>, </span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt; 4:     4    NA    NA    16      y</span></span></code></pre></div></li>
<li><p><strong><code>keep = &quot;inner&quot;</code></strong> keeps only those
observations that match in <em>both</em> tables.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co"># keep matching obs in both tables</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">joyn</span>(x1, y1, <span class="at">keep =</span> <span class="st">&quot;inner&quot;</span>, <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt;       id     t     x     y  .joyn</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt; &lt;fctr&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; 1:     1     1    11    11  x &amp; y</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; 2:     1     2    12    11  x &amp; y</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt; 3:     2     1    13    15  x &amp; y</span></span></code></pre></div></li>
</ul>
</div>
</div>
<div id="an-important-feature-joyn-report-and-info-display" class="section level2">
<h2>An important feature: JOYn report and info display</h2>
<p>Recall that <code>joyn</code> is intended to be informative about the
status and quality of the merging.</p>
<p>üìä <strong>JOYn report</strong></p>
<p>By default, <code>joyn</code> returns the <em>JOYn report</em> ,
i.e., a summary table of the merging. This includes the reporting
variable, the number of rows that come from <code>x</code>, the number
of rows that come from <code>y</code> and those that are common to both
<code>x</code> and <code>y</code>. This info is also shown in percentage
form in the <em>percent</em> column.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">joyn</span>(<span class="at">x =</span> x3, </span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>     <span class="at">y =</span> y3, </span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>     <span class="at">by =</span> <span class="st">&quot;id&quot;</span>, </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>     <span class="at">match_type =</span> <span class="st">&quot;m:m&quot;</span>,</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>     <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt; ‚îÄ‚îÄ JOYn Report ‚îÄ‚îÄ</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt;   .joyn n percent</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; 1     x 2   33.3%</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt; 2     y 1   16.7%</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt; 3 x &amp; y 3     50%</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt; 4 total 6    100%</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt; ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ End of JOYn report ‚îÄ‚îÄ</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt; ‚Ñπ Note: Joyn&#39;s report available in variable .joyn</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt; ‚Ñπ Note: Removing key variables id from id and y</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt;        id     v   foo     y  .joyn</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt;    &lt;char&gt; &lt;int&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt; 1:      c     8     4    11  x &amp; y</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="co">#&gt; 2:      c     8     4    18  x &amp; y</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="co">#&gt; 3:      b     9     2    15  x &amp; y</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="co">#&gt; 4:      d    10     7    NA      x</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a><span class="co">#&gt; 5:      d    11     3    NA      x</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="co">#&gt; 6:      a    NA    NA    20      y</span></span></code></pre></div>
<p>üìù <strong>Displaying messages</strong></p>
<p>One of the value added of <code>joyn</code> is that it produces a
number of messages that are intended to inform you about the status of
the join. The display of such messages is controlled by the argument
<code>verbose</code>, which allows you to show
(<code>verbose = TRUE</code>) or silent (<code>verbose = FALSE</code>)
any messages.</p>
<p>To further explore messages in <code>joyn</code>, please refer to the
‚Äú<strong>Messages‚Äù</strong> article.</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>For a better understanding of the <em>meaning</em>
column check the ‚ÄúAdvanced functionalities‚Äù article<a href="#fnref1" class="footnote-back">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>Notice that in the previous version default match type
was ‚Äúm:m‚Äù instead.<a href="#fnref2" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
